{
	"name": "ReaderExperiments",
	"author": [
		"Marco Fossati",
		"Eric Gardner",
		"Roan Kattouw",
		"Matthias Mullie",
		"Jon Robson",
		"Kimberly Sarabia",
		"Brooke Vibber",
		"Lauralyn Watson"
	],
	"url": "https://www.mediawiki.org/wiki/Special:MyLanguage/Extension:ReaderExperiments",
	"descriptionmsg": "readerexperiments-desc",
	"license-name": "GPL-2.0-or-later",
	"type": "other",
	"requires": {
		"MediaWiki": ">= 1.46.0"
	},
	"AutoloadNamespaces": {
		"MediaWiki\\Extension\\ReaderExperiments\\": "src/"
	},
	"config": {
		"ReaderExperimentsApiBaseUri": {
			"description": "Url to API of MediaWiki instance to use for external data (e.g. when using MobileFrontendContentProvider, in which case this should be equal to $wgMFMwApiContentProviderBaseUri), or leave empty to use local API.",
			"value": ""
		},
		"ReaderExperimentsImageBrowsingExternalWikis": {
			"description": "Map of external wiki domains from which to show other images, to the message key to use when describing the project name.",
			"value": {
				"wikipedia.org": "/* i18n-unused */",
				"wikidata.org": "wikibase-otherprojects-wikidata"
			}
		},
		"ReaderExperimentsShareHighlightEnabled": {
			"description": "Feature flag for ShareHighlight. Must be set to true to enable the feature. Disabled by default pending security review of the html-to-image dependency.",
			"value": false
		}
	},
	"HookHandlers": {
		"ReaderExperimentsHooks": {
			"class": "MediaWiki\\Extension\\ReaderExperiments\\Hooks",
			"optional_services": [
				"TestKitchen.ExperimentManager"
			]
		}
	},
	"Hooks": {
		"BeforePageDisplay": "ReaderExperimentsHooks",
		"BeforeInitialize": "ReaderExperimentsHooks"
	},
	"MessagesDirs": {
		"ReaderExperiments": [
			"i18n"
		]
	},
	"ForeignResourcesDir": "resources/lib",
	"ResourceModules": {
		"ext.readerExperiments.imageBrowsing": {
			"localBasePath": "resources/ext.readerExperiments.imageBrowsing",
			"remoteExtPath": "ReaderExperiments/resources/ext.readerExperiments.imageBrowsing",
			"dependencies": [
				"vue",
				"mediawiki.ForeignApi",
				"mediawiki.language",
				"mediawiki.router",
				"mediawiki.Title",
				"mediawiki.util",
				"smartcrop",
				"@wikimedia/codex",
				"fast-average-color"
			],
			"packageFiles": [
				"init.js",
				{
					"name": "config.json",
					"callback": "MediaWiki\\Extension\\ReaderExperiments\\Hooks::getImageBrowsingConfig"
				},
				{
					"name": "icons.json",
					"callback": "MediaWiki\\ResourceLoader\\CodexModule::getIcons",
					"callbackParam": [
						"cdxIconClose",
						"cdxIconFullscreen",
						"cdxIconShare",
						"cdxIconLogoWikimediaCommons",
						"cdxIconDownload",
						"cdxIconAdd",
						"cdxIconSubtract",
						"cdxIconImage",
						"cdxIconArrowPrevious"
					]
				},
				"excludedImageSelectors.js",
				"thumbExtractor.js",
				"App.vue",
				"components/Carousel.vue",
				"components/CarouselItem.vue",
				"components/CroppedImage.vue",
				"components/DetailView.vue",
				"components/DetailViewCaption.vue",
				"components/DetailViewControls.vue",
				"components/Overlay.vue",
				"components/VisualTableOfContents.vue",
				"components/VisualTableOfContentsItem.vue",
				"components/VisualTableOfContentsOtherWikis.vue",
				"components/VisualTableOfContentsOtherWikisItem.vue",
				"composables/useAltText.js",
				"composables/useBackgroundColor.js",
				"composables/useContentImages.js",
				"composables/useEntityId.js",
				"composables/useExternalImages.js",
				"composables/useImageLabel.js",
				"composables/useSmartCrop.js",
				"composables/useMediaSearchResults.js",
				"composables/useMwApi.js",
				"composables/useUniqueExternalGlobalUsageWikis.js",
				"plugins/instrumentationPlugin.js"
			],
			"styles": [],
			"messages": [
				"readerexperiments-imagebrowsing-carousel-item-button-label",
				"readerexperiments-imagebrowsing-carousel-label",
				"readerexperiments-imagebrowsing-detail-caption-expand",
				"readerexperiments-imagebrowsing-detail-caption-collapse",
				"readerexperiments-imagebrowsing-detail-crop",
				"readerexperiments-imagebrowsing-detail-share",
				"readerexperiments-imagebrowsing-detail-share-copy",
				"readerexperiments-imagebrowsing-detail-view-on-commons",
				"readerexperiments-imagebrowsing-detail-download",
				"readerexperiments-imagebrowsing-detail-download-size-original",
				"readerexperiments-imagebrowsing-detail-download-size-small",
				"readerexperiments-imagebrowsing-detail-download-size-medium",
				"readerexperiments-imagebrowsing-detail-download-size-large",
				"readerexperiments-imagebrowsing-detail-download-size-xl",
				"readerexperiments-imagebrowsing-image-alt-text",
				"readerexperiments-imagebrowsing-loading",
				"readerexperiments-imagebrowsing-overlay-back-button-label",
				"readerexperiments-imagebrowsing-overlay-close-button-label",
				"readerexperiments-imagebrowsing-overlay-label",
				"readerexperiments-imagebrowsing-vtoc-heading",
				"readerexperiments-imagebrowsing-vtoc-other-wikis-heading",
				"readerexperiments-imagebrowsing-vtoc-other-wikis-loading",
				"readerexperiments-imagebrowsing-vtoc-view-button-label",
				"readerexperiments-imagebrowsing-vtoc-external-wikis-wikipedia",
				"readerexperiments-imagebrowsing-vtoc-external-wikis-wikipedia-multiple",
				"readerexperiments-imagebrowsing-vtoc-external-wikis-others",
				"wikibase-otherprojects-wikidata"
			]
		},
		"ext.readerExperiments.imageBrowsing.styles": {
			"localBasePath": "resources/ext.readerExperiments.imageBrowsing",
			"remoteExtPath": "ReaderExperiments/resources/ext.readerExperiments.imageBrowsing",
			"styles": [
				"styles/app.less"
			]
		},
		"fast-average-color": {
			"localBasePath": "resources/lib/fast-average-color",
			"packageFiles": [
				"index.js"
			]
		},
		"smartcrop": {
			"localBasePath": "resources/lib/smartcrop",
			"packageFiles": [
				"smartcrop.js"
			]
		},
		"ext.readerExperiments.smartcrop": {
			"scripts": [
				"lib/smartcrop/smartcrop.js"
			],
			"localBasePath": "resources",
			"remoteExtPath": "ReaderExperiments/resources"
		},
		"ext.readerExperiments.stickyHeaders": {
			"localBasePath": "resources/ext.readerExperiments.stickyHeaders",
			"remoteExtPath": "ReaderExperiments/resources/ext.readerExperiments.stickyHeaders",
			"packageFiles": [
				"init.js"
			],
			"dependencies": [
				"ext.readerExperiments.stickyHeaders.common",
				"ext.readerExperiments.stickyHeaders.styles"
			]
		},
		"ext.readerExperiments.stickyHeaders.common": {
			"localBasePath": "resources/ext.readerExperiments.stickyHeaders.common",
			"remoteExtPath": "ReaderExperiments/resources/ext.readerExperiments.stickyHeaders.common",
			"packageFiles": [
				"init.js"
			],
			"dependencies": [
				"mediawiki.util"
			]
		},
		"ext.readerExperiments.stickyHeaders.legacy": {
			"localBasePath": "resources/ext.readerExperiments.stickyHeaders.legacy",
			"remoteExtPath": "ReaderExperiments/resources/ext.readerExperiments.stickyHeaders.legacy",
			"packageFiles": [
				"init.js"
			],
			"styles": [
				"styles/overrides.less"
			],
			"dependencies": [
				"ext.readerExperiments.stickyHeaders.common",
				"ext.readerExperiments.stickyHeaders.styles"
			]
		},
		"ext.readerExperiments.stickyHeaders.styles": {
			"localBasePath": "resources/ext.readerExperiments.stickyHeaders.styles",
			"remoteExtPath": "ReaderExperiments/resources/ext.readerExperiments.stickyHeaders.styles",
			"styles": [
				"stickyHeaders.less"
			]
		},
		"ext.readerExperiments.minervaToc": {
			"localBasePath": "resources/ext.readerExperiments.minervaToc",
			"remoteExtPath": "ReaderExperiments/resources/ext.readerExperiments.minervaToc",
			"packageFiles": [
				"export.js",
				{
					"name": "icons.json",
					"callback": "MediaWiki\\ResourceLoader\\CodexModule::getIcons",
					"callbackParam": [
						"cdxIconEdit",
						"cdxIconListBullet"
					]
				},
				"FloatingButtonApp.vue",
				"StickyHeaderApp.vue",
				"components/StickyHeader.vue",
				"components/TableOfContents.vue",
				"composables/useActiveHeading.js",
				"composables/useTableOfContentsCoordinator.js"
			],
			"messages": [
				"edit",
				"readerexperiments-minerva-toc-button-label",
				"readerexperiments-minerva-toc-top-link"
			],
			"dependencies": [
				"vue",
				"@wikimedia/codex"
			]
		},
		"ext.readerExperiments.minervaToc/sticky": {
			"localBasePath": "resources/ext.readerExperiments.minervaToc",
			"remoteExtPath": "ReaderExperiments/resources/ext.readerExperiments.minervaToc",
			"packageFiles": [
				"initStickyHeader.js"
			],
			"dependencies": [
				"ext.readerExperiments.minervaToc"
			]
		},
		"ext.readerExperiments.minervaToc/button": {
			"localBasePath": "resources/ext.readerExperiments.minervaToc",
			"remoteExtPath": "ReaderExperiments/resources/ext.readerExperiments.minervaToc",
			"packageFiles": [
				"initFloatingButton.js"
			],
			"dependencies": [
				"ext.readerExperiments.minervaToc"
			]
		},
		"html-to-image": {
			"localBasePath": "resources/lib/html-to-image",
			"packageFiles": [
				"html-to-image.js"
			]
		},
		"ext.readerExperiments.shareHighlight": {
			"localBasePath": "resources/ext.readerExperiments.shareHighlight",
			"remoteExtPath": "ReaderExperiments/resources/ext.readerExperiments.shareHighlight",
			"dependencies": [
				"vue",
				"@wikimedia/codex",
				"mediawiki.util",
				"html-to-image"
			],
			"packageFiles": [
				"init.js",
				{
					"name": "icons.json",
					"callback": "MediaWiki\\ResourceLoader\\CodexModule::getIcons",
					"callbackParam": [
						"cdxIconShare",
						"cdxIconLink",
						"cdxIconLogoWikipedia"
					]
				},
				"App.vue",
				"components/ShareQuoteButton.vue",
				"components/ShareQuoteDialog.vue",
				"components/QuoteCard.vue",
				"composables/useTextSelection.js",
				"composables/useShareQuote.js",
				"utils/textFragment.js",
				"utils/truncateText.js",
				"utils/imageGenerator.js"
			],
			"styles": [],
			"messages": [
				"readerexperiments-sharehighlight-share-quote",
				"readerexperiments-sharehighlight-dialog-title",
				"readerexperiments-sharehighlight-aspect-ratio-legend",
				"readerexperiments-sharehighlight-aspect-ratio-square",
				"readerexperiments-sharehighlight-aspect-ratio-portrait",
				"readerexperiments-sharehighlight-aspect-ratio-wide",
				"readerexperiments-sharehighlight-background-legend",
				"readerexperiments-sharehighlight-background-light",
				"readerexperiments-sharehighlight-background-dark",
				"readerexperiments-sharehighlight-background-wikipedia",
				"readerexperiments-sharehighlight-copy-link",
				"readerexperiments-sharehighlight-link-copied",
				"readerexperiments-sharehighlight-cancel",
				"readerexperiments-sharehighlight-share",
				"readerexperiments-sharehighlight-download",
				"readerexperiments-sharehighlight-generating-image",
				"readerexperiments-sharehighlight-share-title",
				"readerexperiments-sharehighlight-share-text",
				"readerexperiments-sharehighlight-quote-format",
				"readerexperiments-sharehighlight-branding"
			]
		},
		"ext.readerExperiments.shareHighlight.styles": {
			"localBasePath": "resources/ext.readerExperiments.shareHighlight",
			"remoteExtPath": "ReaderExperiments/resources/ext.readerExperiments.shareHighlight",
			"styles": [
				"styles/app.less"
			]
		}
	},
	"manifest_version": 2
}
