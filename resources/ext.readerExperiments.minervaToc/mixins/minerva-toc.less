/* Minerva TOC styles used in both versions: floating button
and sticky headers.
*/

@horizontal-margin: @spacing-100;

// Table of contents (TOC)
.minerva-toc__toc() {
	background: @background-color-base;
	border: @border-subtle;
	position: fixed;
	left: @horizontal-margin;
	right: @horizontal-margin;
	box-sizing: border-box;
	width: calc( 100% - 2 * @horizontal-margin );
	max-width: 640px;
	min-height: 250px;
	overflow: auto;
	padding: @spacing-65;
}

// Button that toggles the TOC
.minerva-toc-button() {
	background-color: @background-color-interactive-subtle--active;
	border-color: @border-color-interactive--active;
	color: @color-base;

	&:hover {
		background-color: @background-color-interactive-subtle--hover;
		border-color: @border-color-interactive--hover;
		color: @color-base;
	}
}

// Fade animation for TOC (300ms)
// @keyframes for v-if enter animation
// TODO: Use Vue <Transition> for fade in/out
.minerva-toc__fade-in() {
	animation: minerva-toc-fade-in 300ms;
}

@keyframes minerva-toc-fade-in {
	from {
		opacity: 0;
	}

	to {
		opacity: 1;
	}
}

// Scroll indicator gradients for TOC
// Show a 56px gradient when there's content above/below to scroll to
// Uses position: sticky so gradients stay at edges of scroll viewport
.minerva-toc__scroll-indicators() {
	@gradient-height: 56px;
	// Use negative margin to extend into padding area
	@gradient-offset: -@spacing-65;

	&::before,
	&::after {
		content: '';
		display: block;
		position: sticky;
		height: @gradient-height;
		// Extend horizontally into padding
		margin-left: @gradient-offset;
		margin-right: @gradient-offset;
		pointer-events: none;
		z-index: 1;
		opacity: 0;
		transition: opacity @transition-duration-medium;
	}

	&::before {
		// Position at top edge of scroll viewport, accounting for padding
		top: @gradient-offset;
		// Negative margin to pull content up behind the gradient
		margin-bottom: calc( -@gradient-height - @gradient-offset );
		background: linear-gradient( to bottom, @background-color-base, transparent );
	}

	&::after {
		// Position at bottom edge of scroll viewport, accounting for padding
		bottom: @gradient-offset;
		// Negative margin to pull content up behind the gradient
		margin-top: calc( -@gradient-height - @gradient-offset );
		background: linear-gradient( to top, @background-color-base, transparent );
	}

	&--can-scroll-up::before {
		opacity: 1;
	}

	&--can-scroll-down::after {
		opacity: 1;
	}
}
